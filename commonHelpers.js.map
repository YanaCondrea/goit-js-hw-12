{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/img/error.svg","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com';\n\nexport async function httpRequest(key, searchText, perPage, page) {\n  const res = await axios.get('/api/', {\n    params: {\n      key: (key = '44769616-4ffe0cee5617f53d3e1075857'),\n      q: searchText,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: perPage,\n      page: page,\n    },\n  });\n\n  return res.data;\n}\n","export default \"__VITE_ASSET__8479b7dd__\"","\nexport function createMurkup(array) {\n\n    return array.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) =>\n        \n  `<li class=\"list-item\">\n  <a class=\"list-item-link\" href=\"${largeImageURL}\">\n    <img\n      class=\"list-item-image\"\n      src=\"${webformatURL}\"\n      alt=\"${tags}\"\n    />\n  </a>\n  <ul class=\"wrap-in-list-item\">\n            <li item-in-wrap>\n              <h3 class=\"item-in-wrap-title\">Likes</h3>\n              <p class=\"item-in-wrap-text\">${likes}</p>\n            </li>\n            <li item-in-wrap>\n              <h3 class=\"item-in-wrap-title\">Views</h3>\n              <p class=\"item-in-wrap-text\">${views}</p>\n            </li>\n            <li item-in-wrap>\n              <h3 class=\"item-in-wrap-title\">Comments</h3>\n              <p class=\"item-in-wrap-text\">${comments}</p>\n            </li>\n            <li item-in-wrap>\n              <h3 class=\"item-in-wrap-title\">Downloads</h3>\n              <p class=\"item-in-wrap-text\">${downloads}</p>\n            </li>\n          </ul>\n  \n</li>`).join(\"\"); \n}","import { httpRequest } from './js/pixabay-api';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport error from './img/error.svg';\nimport { createMurkup } from './js/render-functions';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst key = '44769616-4ffe0cee5617f53d3e1075857';\nlet perPage = 15;\nlet page = 1;\nlet maxPage;\nlet searchText = '';\nconst hiddenClass = 'visually-hidden';\n\nlet lightbox = new SimpleLightbox('.list a', {\n  captions: true,\n  captionType: 'attr',\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionDelay: 250,\n});\n\nconst elements = {\n  form: document.querySelector('.search-form'),\n  list: document.querySelector('.list'),\n  input: document.querySelector('.search-input'),\n  loaderBtn: document.querySelector('.loader-btn'),\n  loader: document.querySelector('.loader'),\n};\n\nelements.form.addEventListener('submit', searchQuery);\n\nasync function searchQuery(evt) {\n  evt.preventDefault();\n  elements.list.innerHTML = '';\n  page = 1;\n  searchText = evt.target.elements.input.value.trim();\n\n  if (searchText === '') {\n    iziToast.show({\n      backgroundColor: '#ef4040',\n      close: false,\n      closeOnClick: true,\n      progressBarColor: 'white',\n      title: 'Error',\n      titleColor: 'white',\n      iconUrl: error,\n      position: 'topRight',\n      icon: 'icon-error.svg',\n      messageColor: 'white',\n      messageSize: '16px',\n      message: 'Form field must be filled in',\n    });\n    elements.form.reset();\n    hideLoaderBtn();\n    return;\n  }\n\n  showLoaderBtn();\n  disableLoaderBtn();\n  showLoader();\n\n  try {\n    const data = await httpRequest(key, searchText, perPage, page);\n    maxPage = Math.ceil(data.totalHits / perPage);\n    const image = data.hits;\n    elements.list.insertAdjacentHTML('beforeend', createMurkup(image));\n\n    lightbox.refresh();\n\n    if (image.length !== data.totalHits && image.length > 0) {\n      enableLoaderBtn();\n      hideLoader();\n      elements.loaderBtn.addEventListener('click', getLoadMoreImage);\n    } else {\n      iziToast.show({\n        backgroundColor: '#ef4040',\n        close: false,\n        closeOnClick: true,\n        progressBarColor: 'white',\n        title: 'Error',\n        titleColor: 'white',\n        iconUrl: error,\n        position: 'topRight',\n        icon: 'icon-error.svg',\n        messageColor: 'white',\n        messageSize: '16px',\n        message:\n          '\"Sorry, there are no images matching your search query. Please try again!\"',\n      });\n      hideLoader();\n      hideLoaderBtn();\n    }\n  } catch (err) {\n    console.log(err);\n  } finally {\n    elements.form.reset();\n  }\n}\n\nasync function getLoadMoreImage() {\n  page += 1;\n  disableLoaderBtn();\n  showLoader();\n  try {\n    const data = await httpRequest(key, searchText, perPage, page);\n    const image = data.hits;\n    elements.list.insertAdjacentHTML('beforeend', createMurkup(image));\n    lightbox.refresh();\n    scrolePage();\n  } catch (err) {\n    console.log(err);\n  } finally {\n    enableLoaderBtn();\n    hideLoader();\n\n    if (page === maxPage) {\n      hideLoaderBtn();\n      elements.loaderBtn.removeEventListener('click', getLoadMoreImage);\n      iziToast.show({\n        class: 'toast',\n        position: 'topRight',\n        messageColor: 'black',\n        message: `We're sorry, but you've reached the end of search results.`,\n      });\n    }\n  }\n}\n\nfunction hideLoaderBtn() {\n  elements.loaderBtn.classList.add(hiddenClass);\n}\n\nfunction showLoaderBtn() {\n  elements.loaderBtn.classList.remove(hiddenClass);\n}\n\nfunction disableLoaderBtn() {\n  elements.loaderBtn.disabled = true;\n}\n\nfunction showLoader() {\n  elements.loader.classList.remove(hiddenClass);\n}\n\nfunction enableLoaderBtn() {\n  elements.loaderBtn.disabled = false;\n}\n\nfunction hideLoader() {\n  elements.loader.classList.add(hiddenClass);\n}\n\nfunction scrolePage() {\n  const li = elements.list.lastChild.getBoundingClientRect();\n  scrollBy({\n    top: li.top + li.height * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["axios","httpRequest","key","searchText","perPage","page","error","createMurkup","array","webformatURL","largeImageURL","tags","likes","views","comments","downloads","maxPage","hiddenClass","lightbox","SimpleLightbox","elements","searchQuery","evt","iziToast","hideLoaderBtn","showLoaderBtn","disableLoaderBtn","showLoader","data","image","enableLoaderBtn","hideLoader","getLoadMoreImage","err","scrolePage","li"],"mappings":"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"}